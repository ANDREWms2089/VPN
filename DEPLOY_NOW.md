# ‚ö° –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ Firebase

## üéØ –®–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Firebase

```bash
cd /Users/andrewvoevodin/StudioProjects/VPN_front
firebase login
```

–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ —á–µ—Ä–µ–∑ Google –∞–∫–∫–∞—É–Ω—Ç.

### 2. –°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç Firebase

–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω:

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://console.firebase.google.com/
2. –ù–∞–∂–º–∏—Ç–µ "Add project"
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "vpn-front-app")
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
5. **–í–ê–ñ–ù–û:** –í–∫–ª—é—á–∏—Ç–µ Billing (Blaze plan) –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ (ping)

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞:

```bash
firebase use --add
```

–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞.

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd functions
npm install
cd ..
```

### 4. –î–µ–ø–ª–æ–π

```bash
firebase deploy --only functions
```

–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤—ã —É–≤–∏–¥–∏—Ç–µ URL –≤–∞—à–µ–≥–æ API:

```
Function URL (api): https://YOUR-REGION-YOUR-PROJECT.cloudfunctions.net/api
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç URL!** –û–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 5. –û–±–Ω–æ–≤–∏—Ç–µ Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–û—Ç–∫—Ä–æ–π—Ç–µ `lib/services/api_service.dart` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `baseUrl`:

```dart
static String get baseUrl {
  // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à Firebase URL
  return 'https://YOUR-REGION-YOUR-PROJECT.cloudfunctions.net/api/api';
  //                                                                 ^^^^ 
  // –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –¥–≤–æ–π–Ω–æ–π /api
}
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–í–∞—à –±—ç–∫–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Firebase Cloud Functions!

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# Health check
curl https://YOUR-REGION-YOUR-PROJECT.cloudfunctions.net/api/health

# –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä—ã
curl https://YOUR-REGION-YOUR-PROJECT.cloudfunctions.net/api/api/servers
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **Billing –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** –¥–ª—è Blaze plan (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ ping)
2. –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier –≤–∫–ª—é—á–∞–µ—Ç 2 –º–ª–Ω –≤—ã–∑–æ–≤–æ–≤ –≤ –º–µ—Å—è—Ü
3. URL —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤–æ–π–Ω–æ–π `/api` - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
4. –§–∞–π–ª—ã —Å–µ—Ä–≤–µ—Ä–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `/tmp` (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏)

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `functions/index.js`:

```bash
firebase deploy --only functions
```

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. `FIREBASE_DEPLOY.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.


